{"ast":null,"code":"var _jsxFileName = \"/Users/enzogrigorio/Library/CloudStorage/OneDrive-ColegiodeGaia/Ambiente de Trabalho/fct/etrainit/backoffice.v3/src/pages/Admin/Students/Form/index.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useCallback } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useForm, FormProvider } from \"react-hook-form\";\nimport { api, filesApi } from \"../../../../api/api\";\nimport { Notify } from \"notiflix/build/notiflix-notify-aio\";\nimport { useNavigate } from \"react-router-dom\";\nimport FirstTab from \"./FirstTab\";\nimport SecondTab from \"./SecondTab\";\nimport ThirdTab from \"./ThirdTab\";\nimport { useEffect } from \"react\";\nimport { Container } from \"../../../../styles/AdminStyles\";\nimport { HeaderDivider, ContainerHeader, HeaderDividerTitle, SubmitButton, CancelButton, Form } from \"../../../../styles/FormsStyles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StudentsForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [tab, setTab] = useState(0);\n  const fileNames = [\"identification\", \"cv\", \"ibanf\", \"drivingCertificate\", \"employerDeclaration\", \"proofAddress\", \"withdrawal\"];\n  const nextTab = () => setTab(tab => tab + 1);\n  const previousTab = () => setTab(tab => tab - 1);\n  const resetAsyncForm = useCallback(async () => {\n    if (!id) return;\n    const result = await api.get(`/student/${id}`);\n    methods.reset(result.data);\n    const files = result.data.files || [];\n  }, []);\n  useEffect(() => {\n    resetAsyncForm();\n  }, [resetAsyncForm]);\n  const methods = useForm();\n  const onSubmit = async data => {\n    let files = {};\n    fileNames.forEach(fileName => {\n      if (methods.getValues(fileName) !== undefined) files[fileName] = methods.getValues(fileName)[0];\n    });\n    try {\n      if (id) {\n        api.put(`/student/${id}`, data);\n        filesApi.patch(`/student/${id}/files`, files);\n        Notify.success(\"Formando editado!\");\n      } else {\n        api.post(\"/student\", data).then(result => {\n          filesApi.patch(`/student/${result.data.insertedId}/files`, files);\n        });\n        Notify.success(\"Formando criado!\");\n      }\n      navigate(\"/Admin/students\");\n    } catch (error) {\n      Notify.failure(\"Erro ao criar formando!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(FormProvider, {\n        ...methods,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: methods.handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(ContainerHeader, {\n            children: [/*#__PURE__*/_jsxDEV(HeaderDivider, {\n              children: /*#__PURE__*/_jsxDEV(CancelButton, {\n                to: \"/Admin/students\",\n                children: \"Cancelar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(HeaderDivider, {\n              children: /*#__PURE__*/_jsxDEV(HeaderDividerTitle, {\n                children: \"Formandos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(HeaderDivider, {\n              children: /*#__PURE__*/_jsxDEV(SubmitButton, {\n                type: \"submit\",\n                value: \"Finalizar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 7\n          }, this), tab === 0 ? /*#__PURE__*/_jsxDEV(FirstTab, {\n            nextTab: nextTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 8\n          }, this) : tab === 1 ? /*#__PURE__*/_jsxDEV(SecondTab, {\n            previousTab: previousTab,\n            nextTab: nextTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(ThirdTab, {\n            previousTab: previousTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n_s(StudentsForm, \"/X8F0TO7xVMs3/yxb/S5pavYryQ=\", false, function () {\n  return [useParams, useNavigate, useForm];\n});\n_c = StudentsForm;\nexport default StudentsForm;\nvar _c;\n$RefreshReg$(_c, \"StudentsForm\");","map":{"version":3,"names":["useState","useCallback","useParams","useForm","FormProvider","api","filesApi","Notify","useNavigate","FirstTab","SecondTab","ThirdTab","useEffect","Container","HeaderDivider","ContainerHeader","HeaderDividerTitle","SubmitButton","CancelButton","Form","jsxDEV","_jsxDEV","Fragment","_Fragment","StudentsForm","_s","id","navigate","tab","setTab","fileNames","nextTab","previousTab","resetAsyncForm","result","get","methods","reset","data","files","onSubmit","forEach","fileName","getValues","undefined","put","patch","success","post","then","insertedId","error","failure","children","handleSubmit","to","_jsxFileName","lineNumber","columnNumber","type","value","_c","$RefreshReg$"],"sources":["/Users/enzogrigorio/Library/CloudStorage/OneDrive-ColegiodeGaia/Ambiente de Trabalho/fct/etrainit/backoffice.v3/src/pages/Admin/Students/Form/index.jsx"],"sourcesContent":["import { useState, useCallback } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useForm, FormProvider } from \"react-hook-form\";\r\nimport { api, filesApi } from \"../../../../api/api\";\r\nimport { Notify } from \"notiflix/build/notiflix-notify-aio\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FirstTab from \"./FirstTab\";\r\nimport SecondTab from \"./SecondTab\";\r\nimport ThirdTab from \"./ThirdTab\";\r\nimport { useEffect } from \"react\";\r\nimport { Container } from \"../../../../styles/AdminStyles\";\r\nimport {\r\n\tHeaderDivider,\r\n\tContainerHeader,\r\n\tHeaderDividerTitle,\r\n\tSubmitButton,\r\n\tCancelButton,\r\n\tForm,\r\n} from \"../../../../styles/FormsStyles\";\r\n\r\nconst StudentsForm = () => {\r\n\tconst { id } = useParams();\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [tab, setTab] = useState(0);\r\n\r\n\tconst fileNames = [\r\n\t\t\"identification\",\r\n\t\t\"cv\",\r\n\t\t\"ibanf\",\r\n\t\t\"drivingCertificate\",\r\n\t\t\"employerDeclaration\",\r\n\t\t\"proofAddress\",\r\n\t\t\"withdrawal\",\r\n\t];\r\n\r\n\tconst nextTab = () => setTab((tab) => tab + 1);\r\n\tconst previousTab = () => setTab((tab) => tab - 1);\r\n\r\n\tconst resetAsyncForm = useCallback(async () => {\r\n\t\tif (!id) return;\r\n\r\n\t\tconst result = await api.get(`/student/${id}`);\r\n\t\tmethods.reset(result.data);\r\n\t\tconst files = result.data.files || [];\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tresetAsyncForm();\r\n\t}, [resetAsyncForm]);\r\n\r\n\tconst methods = useForm();\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tlet files = {};\r\n\t\tfileNames.forEach((fileName) => {\r\n\t\t\tif (methods.getValues(fileName) !== undefined)\r\n\t\t\t\tfiles[fileName] = methods.getValues(fileName)[0];\r\n\t\t});\r\n\r\n\t\ttry {\r\n\r\n\t\t\tif (id) {\r\n\t\t\t\tapi.put(`/student/${id}`, data);\r\n\t\t\t\tfilesApi.patch(`/student/${id}/files`, files);\r\n\t\t\t\tNotify.success(\"Formando editado!\");\r\n\r\n\t\t\t} else {\r\n\t\t\t\tapi.post(\"/student\", data).then((result) => {\r\n\t\t\t\t\tfilesApi.patch(`/student/${result.data.insertedId}/files`, files);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tNotify.success(\"Formando criado!\");\r\n\t\t\t}\r\n\t\t\tnavigate(\"/Admin/students\");\r\n\t\t} catch (error) {\r\n\t\t\tNotify.failure(\"Erro ao criar formando!\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Container>\r\n\t\t\t\t<FormProvider {...methods}>\r\n\t\t\t\t\t<Form onSubmit={methods.handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\t<ContainerHeader>\r\n\t\t\t\t\t\t\t<HeaderDivider>\r\n\t\t\t\t\t\t\t\t<CancelButton to={\"/Admin/students\"}>Cancelar</CancelButton>\r\n\t\t\t\t\t\t\t</HeaderDivider>\r\n\t\t\t\t\t\t\t<HeaderDivider>\r\n\t\t\t\t\t\t\t\t<HeaderDividerTitle>Formandos</HeaderDividerTitle>\r\n\t\t\t\t\t\t\t</HeaderDivider>\r\n\t\t\t\t\t\t\t<HeaderDivider>\r\n\t\t\t\t\t\t\t\t<SubmitButton type='submit' value='Finalizar' />\r\n\t\t\t\t\t\t\t</HeaderDivider>\r\n\t\t\t\t\t\t</ContainerHeader>\r\n\t\t\t\t\t\t{tab === 0 ? (\r\n\t\t\t\t\t\t\t<FirstTab nextTab={nextTab} />\r\n\t\t\t\t\t\t) : tab === 1 ? (\r\n\t\t\t\t\t\t\t<SecondTab previousTab={previousTab} nextTab={nextTab} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ThirdTab previousTab={previousTab} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</FormProvider>\r\n\t\t\t</Container>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default StudentsForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}