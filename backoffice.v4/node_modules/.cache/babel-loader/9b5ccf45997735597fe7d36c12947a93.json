{"ast":null,"code":"var _jsxFileName = \"/Users/lfscastanheira/Documents/GitHub/PAP/backoffice.v4/src/pages/Admin/Teachers/Form/index.jsx\",\n  _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useForm, FormProvider } from \"react-hook-form\";\nimport { api, filesApi } from \"../../../../api/api\";\nimport { Notify } from \"notiflix/build/notiflix-notify-aio\";\nimport { useNavigate } from \"react-router-dom\";\nimport FirstTab from \"./FirstTab\";\nimport SecondTab from \"./SecondTab\";\nimport ThirdTab from \"./ThirdTab\";\nimport ForthTab from \"./ForthTab\";\nimport { Container } from \"../../../../styles/AdminStyles\";\nimport { HeaderDivider, ContainerHeader, HeaderDividerTitle, SubmitButton, CancelButton, Form } from \"../../../../styles/FormsStyles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TeachersForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [tab, setTab] = useState(0);\n  const nextTab = () => setTab(tab => tab + 1);\n  const previousTab = () => setTab(tab => tab - 1);\n  const resetAsyncForm = useCallback(async () => {\n    if (!id) return;\n    const result = await api.get(`/teacher/${id}`);\n    methods.reset(result.data);\n  }, []);\n  const fileNames = [\"identification\", \"cv\", \"ibanf\", \"cap\", \"contributoryStatus\", \"curriculumAnalysis\", \"socialSecurityDeclarartion\", \"criminalRecord\", \"habilitationCertificate\", \"selectionReport\", \"finance\", \"formerDeclaration\"];\n  useEffect(() => {\n    resetAsyncForm();\n  }, [resetAsyncForm]);\n  const methods = useForm();\n  const onSubmit = async data => {\n    let files = {};\n    fileNames.map(fileName => {\n      if (methods.getValues(fileName) !== undefined) files[fileName] = methods.getValues(fileName)[0];\n    });\n    if (id) {\n      await api.put(`/teacher/${id}`, data);\n      await filesApi.patch(`/teacher/${id}/files`, files);\n    } else {\n      const id = await api.post(\"/teacher\", data).then(result => {\n        return result.data.insertedId;\n      });\n      await filesApi.patch(`/teacher/${id}/files`, files);\n    }\n    Notify.success(\"Formador criado!\");\n    navigate(\"/Admin/teachers\");\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(FormProvider, {\n        ...methods,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: methods.handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(ContainerHeader, {\n            children: [/*#__PURE__*/_jsxDEV(HeaderDivider, {\n              children: /*#__PURE__*/_jsxDEV(CancelButton, {\n                to: \"/Admin/teachers\",\n                children: \"Cancelar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(HeaderDivider, {\n              children: /*#__PURE__*/_jsxDEV(HeaderDividerTitle, {\n                children: \"Formadores\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(HeaderDivider, {\n              children: /*#__PURE__*/_jsxDEV(SubmitButton, {\n                type: \"submit\",\n                value: \"Finalizar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 7\n          }, this), tab === 0 ? /*#__PURE__*/_jsxDEV(FirstTab, {\n            nextTab: nextTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 8\n          }, this) : tab === 1 ? /*#__PURE__*/_jsxDEV(SecondTab, {\n            previousTab: previousTab,\n            nextTab: nextTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 8\n          }, this) : tab === 2 ? /*#__PURE__*/_jsxDEV(ThirdTab, {\n            previousTab: previousTab,\n            nextTab: nextTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(ForthTab, {\n            previousTab: previousTab\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n_s(TeachersForm, \"/X8F0TO7xVMs3/yxb/S5pavYryQ=\", false, function () {\n  return [useParams, useNavigate, useForm];\n});\n_c = TeachersForm;\nexport default TeachersForm;\nvar _c;\n$RefreshReg$(_c, \"TeachersForm\");","map":{"version":3,"names":["useCallback","useEffect","useState","useParams","useForm","FormProvider","api","filesApi","Notify","useNavigate","FirstTab","SecondTab","ThirdTab","ForthTab","Container","HeaderDivider","ContainerHeader","HeaderDividerTitle","SubmitButton","CancelButton","Form","jsxDEV","_jsxDEV","Fragment","_Fragment","TeachersForm","_s","id","navigate","tab","setTab","nextTab","previousTab","resetAsyncForm","result","get","methods","reset","data","fileNames","onSubmit","files","map","fileName","getValues","undefined","put","patch","post","then","insertedId","success","children","handleSubmit","to","_jsxFileName","lineNumber","columnNumber","type","value","_c","$RefreshReg$"],"sources":["/Users/lfscastanheira/Documents/GitHub/PAP/backoffice.v4/src/pages/Admin/Teachers/Form/index.jsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useForm, FormProvider } from \"react-hook-form\";\r\nimport { api, filesApi } from \"../../../../api/api\";\r\nimport { Notify } from \"notiflix/build/notiflix-notify-aio\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FirstTab from \"./FirstTab\";\r\nimport SecondTab from \"./SecondTab\";\r\nimport ThirdTab from \"./ThirdTab\";\r\nimport ForthTab from \"./ForthTab\";\r\nimport { Container } from \"../../../../styles/AdminStyles\";\r\nimport {\r\n\tHeaderDivider,\r\n\tContainerHeader,\r\n\tHeaderDividerTitle,\r\n\tSubmitButton,\r\n\tCancelButton,\r\n\tForm,\r\n} from \"../../../../styles/FormsStyles\";\r\n\r\nconst TeachersForm = () => {\r\n\tconst { id } = useParams();\r\n\tconst navigate = useNavigate();\r\n\tconst [tab, setTab] = useState(0);\r\n\r\n\tconst nextTab = () => setTab((tab) => tab + 1);\r\n\tconst previousTab = () => setTab((tab) => tab - 1);\r\n\r\n\tconst resetAsyncForm = useCallback(async () => {\r\n\t\tif (!id) return;\r\n\r\n\t\tconst result = await api.get(`/teacher/${id}`);\r\n\t\tmethods.reset(result.data);\r\n\t}, []);\r\n\r\n\tconst fileNames = [\r\n\t\t\"identification\",\r\n\t\t\"cv\",\r\n\t\t\"ibanf\",\r\n\t\t\"cap\",\r\n\t\t\"contributoryStatus\",\r\n\t\t\"curriculumAnalysis\",\r\n\t\t\"socialSecurityDeclarartion\",\r\n\t\t\"criminalRecord\",\r\n\t\t\"habilitationCertificate\",\r\n\t\t\"selectionReport\",\r\n\t\t\"finance\",\r\n\t\t\"formerDeclaration\",\r\n\t];\r\n\r\n\tuseEffect(() => {\r\n\t\tresetAsyncForm();\r\n\t}, [resetAsyncForm]);\r\n\r\n\tconst methods = useForm();\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\t\r\n\t\tlet files = {};\r\n\t\tfileNames.map((fileName) => {\r\n\t\t\tif (methods.getValues(fileName) !== undefined)\r\n\t\t\t\tfiles[fileName] = methods.getValues(fileName)[0];\r\n\t\t});\r\n\r\n\t\tif (id) {\r\n\t\t\tawait api.put(`/teacher/${id}`, data);\r\n\t\t\tawait filesApi.patch(`/teacher/${id}/files`, files);\r\n\t\t} else {\r\n\t\t\tconst id = await api.post(\"/teacher\", data).then((result) => {\r\n\t\t\t\treturn result.data.insertedId;\r\n\t\t\t});\r\n\t\t\tawait filesApi.patch(`/teacher/${id}/files`, files);\r\n\t\t}\r\n\r\n\t\tNotify.success(\"Formador criado!\");\r\n\t\tnavigate(\"/Admin/teachers\");\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Container>\r\n\t\t\t\t<FormProvider {...methods}>\r\n\t\t\t\t\t<Form onSubmit={methods.handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\t<ContainerHeader>\r\n\t\t\t\t\t\t\t<HeaderDivider>\r\n\t\t\t\t\t\t\t\t<CancelButton to={\"/Admin/teachers\"}>Cancelar</CancelButton>\r\n\t\t\t\t\t\t\t</HeaderDivider>\r\n\t\t\t\t\t\t\t<HeaderDivider>\r\n\t\t\t\t\t\t\t\t<HeaderDividerTitle>Formadores</HeaderDividerTitle>\r\n\t\t\t\t\t\t\t</HeaderDivider>\r\n\t\t\t\t\t\t\t<HeaderDivider>\r\n\t\t\t\t\t\t\t\t<SubmitButton type='submit' value='Finalizar' />\r\n\t\t\t\t\t\t\t</HeaderDivider>\r\n\t\t\t\t\t\t</ContainerHeader>\r\n\t\t\t\t\t\t{tab === 0 ? (\r\n\t\t\t\t\t\t\t<FirstTab nextTab={nextTab} />\r\n\t\t\t\t\t\t) : tab === 1 ? (\r\n\t\t\t\t\t\t\t<SecondTab previousTab={previousTab} nextTab={nextTab} />\r\n\t\t\t\t\t\t) : tab === 2 ? (\r\n\t\t\t\t\t\t\t<ThirdTab previousTab={previousTab} nextTab={nextTab} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ForthTab previousTab={previousTab} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</FormProvider>\r\n\t\t\t</Container>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TeachersForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}