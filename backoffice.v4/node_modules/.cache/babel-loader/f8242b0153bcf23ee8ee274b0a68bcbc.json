{"ast":null,"code":"var _jsxFileName = \"/Users/enzogrigorio/Library/CloudStorage/OneDrive-ColegiodeGaia/Ambiente de Trabalho/fct/etrainit/backoffice.v3/src/pages/Admin/Calendar/index.jsx\",\n  _s = $RefreshSig$();\nimport styled from \"styled-components\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport ReactAsync from \"react-select/async\";\nimport \"./CalendarStyles.css\";\nimport { ContainerHeader, SmallContainer, Header, TableIconContainer, TableRow, Search, Edit, Add, EditIcon, HeaderDivider, TableField } from \"../../../styles/AdminStyles\";\nimport { api } from \"../../../api/api\";\nimport { Notify } from \"notiflix\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Index() {\n  _s();\n  const [teachers, setTeachers] = useState([]);\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const [key, setKey] = useState(0);\n  const [teacherParam, setTeacherParam] = useState(\"all\");\n  const [selectedValue, setSelectedValue] = useState(null);\n  useEffect(() => {\n    api.get('/teachers').then(response => {\n      const teacherData = response.data.map(teacher => ({\n        label: teacher.name,\n        value: teacher._id\n      }));\n      setTeachers(teacherData);\n      setTeachers([{\n        label: 'Todos os professores',\n        value: 'all'\n      }, ...teacherData]);\n    }).catch(error => {\n      Notify.failure(\"Erro ao buscar os professores\");\n    });\n  }, []);\n  const handleTeacherChange = selectedOption => {\n    setSelectedTeacher(selectedOption);\n  };\n  const Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    background-color: #fff;\n    border-radius: 10px;\n    padding: 1rem;\n    height: 100%;\n    overflow-y: auto;\n  `;\n  const Select = styled(ReactAsync)`\n    width: 50%;\n    margin-bottom: 2rem;\n    .css-13cymwt-control,\n    .css-t3ipsp-control {\n      border: 2px solid ${props => props.theme.colors.background};\n      border-radius: 0.5rem;\n    }\n    .css-13cymwt-control:hover,\n    .css-t3ipsp-control:hover {\n      border-color: ${props => props.theme.colors.secundary};\n      cursor: pointer;\n    }\n    .css-t3ipsp-control {\n      box-shadow: none;\n    }\n  `;\n  const styles = {\n    wrap: {\n      display: \"flex\"\n    },\n    left: {\n      marginRight: \"10px\"\n    },\n    main: {\n      flexGrow: \"1\"\n    }\n  };\n  const handleChange = selectedOption => {\n    setSelectedTeacher(selectedOption);\n  };\n  const filterColors = inputValue => {\n    return teachers.filter(i => i.label.toLowerCase().includes(inputValue.toLowerCase()));\n  };\n  const loadOptions = (inputValue, callback) => {\n    setTimeout(() => {\n      callback(filterColors(inputValue));\n    }, 500);\n  };\n  useEffect(() => {\n    setTeacherParam(selectedTeacher ? selectedTeacher.value || \"all\" : \"all\");\n  }, [selectedTeacher]);\n  window.addEventListener(\"message\", event => {\n    if (event.data.type === \"dC\") {\n      console.log(\"type: dateClick\");\n      console.log(event.data.info);\n    } else if (event.data.type === \"eC\") {\n      console.log(\"type: eventClick\");\n      console.log(event.data.info);\n      window.location.href = \"#/Admin/calendar/form?id=\" + event.data.info.id;\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cHeader\",\n        children: [teachers.length > 0 &&\n        /*#__PURE__*/\n        // Verifica se há dados nos professores\n        _jsxDEV(Select, {\n          loadOptions: loadOptions,\n          value: teachers.find(teacher => teacher.value === teacherParam),\n          defaultOptions: true,\n          onChange: handleChange,\n          placeholder: \"Escolha um formador\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Add, {\n          to: \"/Admin/calendar/form\",\n          children: \"Adicionar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendario\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          src: 'http://localhost:3006/calendario?professorId=' + teacherParam,\n          frameborder: \"0\",\n          height: \"700px\",\n          width: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Index, \"2ocnHo1sdqb91swh8Kk7E6BaVAw=\");\n_c = Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"names":["styled","React","useState","useRef","useEffect","ReactAsync","ContainerHeader","SmallContainer","Header","TableIconContainer","TableRow","Search","Edit","Add","EditIcon","HeaderDivider","TableField","api","Notify","jsxDEV","_jsxDEV","Fragment","_Fragment","Index","_s","teachers","setTeachers","selectedTeacher","setSelectedTeacher","key","setKey","teacherParam","setTeacherParam","selectedValue","setSelectedValue","get","then","response","teacherData","data","map","teacher","label","name","value","_id","catch","error","failure","handleTeacherChange","selectedOption","Container","div","Select","props","theme","colors","background","secundary","styles","wrap","display","left","marginRight","main","flexGrow","handleChange","filterColors","inputValue","filter","i","toLowerCase","includes","loadOptions","callback","setTimeout","window","addEventListener","event","type","console","log","info","location","href","id","children","className","length","find","defaultOptions","onChange","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","to","src","frameborder","height","width","_c","$RefreshReg$"],"sources":["/Users/enzogrigorio/Library/CloudStorage/OneDrive-ColegiodeGaia/Ambiente de Trabalho/fct/etrainit/backoffice.v3/src/pages/Admin/Calendar/index.jsx"],"sourcesContent":["\nimport styled from \"styled-components\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport ReactAsync from \"react-select/async\";\nimport \"./CalendarStyles.css\";\nimport {\n\t\n\tContainerHeader,\n\tSmallContainer,\n\tHeader,\n\tTableIconContainer,\n\tTableRow,\n\tSearch,\n\tEdit,\n\tAdd,\n\tEditIcon,\n\tHeaderDivider,\n\tTableField,\n} from \"../../../styles/AdminStyles\";\nimport { api } from \"../../../api/api\";\nimport { Notify } from \"notiflix\";\n\nexport default function Index() {\n  \n  const [teachers, setTeachers] = useState([]);\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const [key, setKey] = useState(0);\n  const [teacherParam, setTeacherParam] = useState(\"all\")\n  const [selectedValue, setSelectedValue] = useState(null);\n\n\n  \n\n  useEffect(() => {\n    \n    api.get('/teachers')\n      .then(response => {\n        const teacherData = response.data.map(teacher => ({\n          label: teacher.name,\n          value: teacher._id,\n        }));\n        setTeachers(teacherData);\n        setTeachers([{ label: 'Todos os professores', value: 'all' }, ...teacherData]);\n      })\n      .catch(error => {\n        Notify.failure(\"Erro ao buscar os professores\");\n      });\n  }, []); \n\n  const handleTeacherChange = selectedOption => {\n    setSelectedTeacher(selectedOption);\n  };\n  \n  \n  \n  const Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    background-color: #fff;\n    border-radius: 10px;\n    padding: 1rem;\n    height: 100%;\n    overflow-y: auto;\n  `;\n\n  const Select = styled(ReactAsync)`\n    width: 50%;\n    margin-bottom: 2rem;\n    .css-13cymwt-control,\n    .css-t3ipsp-control {\n      border: 2px solid ${(props) => props.theme.colors.background};\n      border-radius: 0.5rem;\n    }\n    .css-13cymwt-control:hover,\n    .css-t3ipsp-control:hover {\n      border-color: ${(props) => props.theme.colors.secundary};\n      cursor: pointer;\n    }\n    .css-t3ipsp-control {\n      box-shadow: none;\n    }\n  `;\n\n  const styles = {\n    wrap: {\n      display: \"flex\",\n    },\n    left: {\n      marginRight: \"10px\",\n    },\n    main: {\n      flexGrow: \"1\",\n    },\n  };\n  \n  const handleChange = selectedOption => {\n    setSelectedTeacher(selectedOption);\n  };\n  const filterColors = (inputValue) => {\n\t\treturn teachers.filter((i) =>\n\t\t\ti.label.toLowerCase().includes(inputValue.toLowerCase())\n\t\t);\n\t};\n\n\tconst loadOptions = (inputValue, callback) => {\n\t\tsetTimeout(() => {\n\t\t\tcallback(filterColors(inputValue));\n\t\t}, 500);\n\t};\n\n  useEffect(() => {\n    \n    setTeacherParam(selectedTeacher ? (selectedTeacher.value || \"all\") : \"all\");\n    \n  }, [selectedTeacher]) \n  window.addEventListener(\"message\", (event) => {\n    if(event.data.type === \"dC\"){\n      console.log(\"type: dateClick\")\n      console.log(event.data.info)\n      \n\n    } else if (event.data.type === \"eC\"){\n      console.log(\"type: eventClick\")\n      console.log(event.data.info)\n      window.location.href = \"#/Admin/calendar/form?id=\" + event.data.info.id;\n\n    }\n  });\n  return (\n    <>\n      <Container>\n        <div className=\"cHeader\">\n        {teachers.length > 0 && ( // Verifica se há dados nos professores\n          <Select\n            loadOptions={loadOptions}\n            value={teachers.find(teacher => teacher.value === teacherParam)}\n            defaultOptions\n            onChange={handleChange}\n            placeholder=\"Escolha um formador\"\n          />\n        )}\n          <Add to={\"/Admin/calendar/form\"}>Adicionar</Add> {/* esse botão vai precisar de se comportar da mesma forma que o antigo criar evento do calendário*/}\n        </div>\n        \n        <div className=\"calendario\">\n          <iframe\n            src={'http://localhost:3006/calendario?professorId=' + teacherParam  }\n            frameborder=\"0\"\n            height=\"700px\"\n            width=\"100%\"\n            \n          ></iframe>\n        </div>\n      </Container>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}